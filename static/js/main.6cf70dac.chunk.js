(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{61:function(e){e.exports=[{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"},{name:"newNonce",type:"uint256"},{name:"amount",type:"uint256"},{name:"message",type:"string"},{name:"v",type:"uint8"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"}],name:"disputeRedemption",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"},{name:"_customer",type:"address"}],name:"newCustomerRedemptionChannelId",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"}],name:"newStro",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"}],name:"stroPay",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"},{name:"_nonce",type:"uint256"},{name:"amount",type:"uint256"},{name:"message",type:"string"},{name:"v",type:"uint8"},{name:"r",type:"bytes32"},{name:"s",type:"bytes32"}],name:"stroRedeem",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"}],name:"stroStamping",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[{name:"_database",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[{name:"_id",type:"uint256"},{name:"channelId",type:"uint256"}],name:"multiChannel",outputs:[],payable:!1,stateMutability:"view",type:"function"}]},71:function(e,t,n){e.exports=n(95)},88:function(e,t,n){e.exports=n.p+"static/media/coffee.8674e3c5.JPG"},89:function(e,t,n){e.exports=n.p+"static/media/bagel.c92ec00c.JPG"},90:function(e,t,n){e.exports=n.p+"static/media/wrap.d73bfa7b.JPG"},91:function(e,t,n){e.exports=n.p+"static/media/donuts.645a91a6.JPG"},92:function(e,t,n){e.exports=n.p+"static/media/timbits.5d3d115d.JPG"},93:function(e,t,n){e.exports=n.p+"static/media/pastries.aaf96547.JPG"},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(33),s=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(25),i=n(10),u=n(6),l=n(18),d=n(17),m=n(19),p=n(34),h=n(35);function f(){var e=Object(p.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tmin-height: 100vh;\n"]);return f=function(){return e},e}var b=h.a.div(f());function v(){var e=Object(p.a)(["\n\tflex: 1;\n"]);return v=function(){return e},e}var y=h.a.div(v()),g=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,"Developed for ",r.a.createElement("strong",null,"GBC dApp2")," course by Abiel Villarosa",r.a.createElement("br",null)))))},E=n(22),w=n(8),k=n(31),C=n(3),x=n.n(C),j=n(7),O=n(48),S=n(61),N=function(){function e(){Object(i.a)(this,e),window.ethereum.enable(),this.provider=new O.ethers.providers.Web3Provider(window.web3.currentProvider),this.signer=this.provider.getSigner(),this.dashboardContract=new O.ethers.Contract("0x729d5f93149e8e03851015a67c5fcde799ebc487",S,this.signer)}return Object(u.a)(e,[{key:"newStro",value:function(){var e=Object(j.a)(x.a.mark(function e(t){var n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.newStro(t);case 2:return n=e.sent,e.abrupt("return",n.from);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"newCustomerRedemptionChannelId",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n,a){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.newCustomerRedemptionChannelId(t,n,a);case 2:return r=e.sent,console.log(r),e.abrupt("return",r.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stroStamping",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n,a){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.stroStamping(t,n,{value:a});case 2:return r=e.sent,console.log(r),e.abrupt("return",r.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stroRedeem",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n,a,r,o,s,c,i){var u;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.stroRedeem(t,n,a,r,o,s,c,i);case 2:return u=e.sent,console.log(u),e.abrupt("return",u.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,a,r,o,s,c,i){return e.apply(this,arguments)}}()},{key:"disputeRedemption",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n,a,r,o,s,c,i){var u;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.disputeRedemption(t,n,a,r,o,s,c,i);case 2:return u=e.sent,console.log(u),e.abrupt("return",u.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,a,r,o,s,c,i){return e.apply(this,arguments)}}()},{key:"stroPay",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.stroPay(t,n);case 2:return a=e.sent,console.log(a),e.abrupt("return",a.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"newCustomerRedemptionChannel",value:function(){var e=Object(j.a)(x.a.mark(function e(t,n){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardContract.newCustomerRedemptionChannel(t,n);case 2:return a=e.sent,console.log(a),e.abrupt("return",a.hash);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),R=function(){var e=Object(j.a)(x.a.mark(function e(){var t,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/getRestoUid",{method:"get",mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,console.log("get RestoUid",n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(x.a.mark(function e(t){var n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/addNewResto",{method:"post",mode:"cors",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log("get RestoUid",a),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(x.a.mark(function e(t){var n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/addNewProduct",{method:"post",mode:"cors",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log("get RestoUid",a),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(x.a.mark(function e(t){var n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/getProducts?restoUid=".concat(t),{method:"get",mode:"cors"});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log("get Products",a),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(x.a.mark(function e(){var t,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/getCustomerUid",{method:"get",mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,console.log("get RestoUid",n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(x.a.mark(function e(t){var n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/addNewCustomer",{method:"post",mode:"cors",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log("get RestoUid",a),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(x.a.mark(function e(t){var n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/strodapp-backend/us-central1/earnStamp",{method:"put",mode:"cors",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,console.log("get RestoUid",a),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=n(62),H=n.n(G),M=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(H.a,{url:"https://youtu.be/4wH878t78bw",playing:!0})}}]),t}(a.Component),J=n(105),_=n(106),B=n(107),W=n(108),V=Object(J.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),$=function(){var e=V();return r.a.createElement("div",{className:e.root},r.a.createElement(_.a,{position:"static"},r.a.createElement(B.a,null,r.a.createElement(W.a,{variant:"h6",className:e.title},"Stro"))))},z=new N,F=(Object(J.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}}),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={registrationopen:!1,signupopen:!1,signinopen:!1,restoUid:"",redirect:!1,result:"",txHash:""},n.handleClick=n.handleClick.bind(Object(w.a)(n)),n.handleRegister=n.handleRegister.bind(Object(w.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),R().then(function(e){console.log("res",e.restouid);var n=e.restouid;z.newStro(e.restouid).then(function(e){console.log(e);var a=e;U({restoUid:n,restoName:"bk",restoAddress:a}),localStorage.setItem("restoUid",n),localStorage.setItem("restoAddress",a),t.setState({redirect:!0,txHash:e,restoUid:n})})})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),z.newStro().then(function(e){console.log(e),t.setState({redirect:!0,txHash:e})})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(E.a,{push:!0,to:{pathname:"/stroDapp/RestoHome",state:{result:this.state.restoUid}}}):r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement("div",{class:"columns is-mobile"},r.a.createElement("div",null,r.a.createElement(M,null)),r.a.createElement("div",null,r.a.createElement("div",{class:"headingtext"},r.a.createElement(W.a,{variant:"h5"},"Save the turtles. Save the Earth.")),r.a.createElement("span",null,r.a.createElement("a",{class:"button is-black",style:{width:300},onClick:function(){return e.setState({registrationopen:!0})}},"Register as Restaurant")),r.a.createElement(c.b,{to:"/stroDapp/RestoHome",exact:!0},r.a.createElement("span",null,r.a.createElement("a",{class:"button is-black",style:{width:300},onClick:function(){return e.setState({open:!0})}},"Restaurant Owner"))),r.a.createElement(c.b,{to:"/stroDapp/CustomerHome2",exact:!0},r.a.createElement("span",null,r.a.createElement("a",{class:"button is-black",style:{width:300},onClick:function(){return e.setState({open:!0})}},"Customer"))))),r.a.createElement(k.Modal,{show:this.state.registrationopen,onClose:function(){return e.setState({registrationopen:!1})},style:F},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-card"},r.a.createElement("section",{class:"modal-card-body"},r.a.createElement("div",null,r.a.createElement("p",{class:"modal-card-title",alignment:"center"},"Sign Up"),r.a.createElement("p",null,"Enter your Company Name."),r.a.createElement("br",null)),r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Company Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"companyName",required:!0}))))),r.a.createElement("footer",{class:"modal-card-foot"},r.a.createElement(c.b,{className:"navbar-item",to:"/stroDapp/RestoHome",activeClassName:"is-active",exact:!0},r.a.createElement("button",{className:"button is-block is-info is-fullwidth",onClick:this.handleRegister},"Register")),r.a.createElement("button",{class:"button",onClick:function(){return e.setState({registrationopen:!1})}},"Cancel")))))}}]),t}(a.Component),L=n(64),Q=n(111),T=n(109),X=n(110),Y=function(e){return r.a.createElement("div",null,e.product?r.a.createElement(T.a,null,r.a.createElement(X.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h4",component:"h3"},e.product.productName),r.a.createElement(W.a,{component:"p"},"Required Points: ",e.product.requiredPts))):null)},Z=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={product:[],restoUid:""},e.getProducts=function(){console.log("this.state.restoUid inside gallery",e.state.restoUid),D(e.state.restoUid).then(function(t){e.setState({product:t})}).catch(function(e){console.log("Error occured while fetching data"),console.log(e)})},e.getProducts(),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("restoUid");this.setState({restoUid:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{class:"headingtext2"},r.a.createElement(W.a,{gutterBottom:!0,variant:"h4",component:"h3"},"Product Gallery")),this.state.product?r.a.createElement("div",null,r.a.createElement(Q.a,{container:!0,spacing:20,style:{padding:24}},this.state.product.map(function(e){return r.a.createElement(Q.a,{item:!0,xs:10,sm:6,lg:4,xl:2},r.a.createElement(Y,{product:e}))}))):"No products found")}}]),t}(a.Component),ee=new N,te={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},ne=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,redirect:!1,result:"",txHash:"",restoUid:"",restoAddress:"",productName:"",requiredPts:0,customeruid:0,customerAddress:"",earnedPts:0},n.handleChange=n.handleChange.bind(Object(w.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(w.a)(n)),n.handleNewCust=n.handleNewCust.bind(Object(w.a)(n)),n.handleStamp=n.handleStamp.bind(Object(w.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={restoUid:this.state.restoUid,productName:this.state.productName,requiredPts:this.state.requiredPts};P(n).then(function(e){var n=t.state.restoUid;D(n).then(function(e){console.log("getProducts",e)})}),this.setState({open:!1})}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"handleNewCust",value:function(e){var t=this;e.preventDefault(),I().then(function(e){console.log("res.customeruid",e.customeruid);var n=t.state.restoUid,a=e.customeruid,r=t.state.customerAddress;ee.newCustomerRedemptionChannelId(n,a,r).then(function(e){console.log("blockchainres",e),console.log("restoUid",n),console.log("customerUid",a),console.log("customerAddress",r),t.setState({customeruid:a}),A({restoUid:n,customerUid:a,customerAddress:r})})})}},{key:"handleStamp",value:function(e){var t=this;e.preventDefault();var n=this.state.customeruid;console.log("outside customerUid",n),I().then(function(e){var n=t.state.restoUid;console.log("res restoUid",n);t.state.restoAddress;var a=t.state.customeruid;console.log("inside customerUid",a);var r=parseInt(t.state.earnedPts);console.log("earnedPts",r),ee.stroStamping(n,a,r).then(function(e){console.log("blockchainstampres",e),q({restoUid:n,customerUid:a,earnedPts:r})})})}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("restoUid"),t=localStorage.getItem("restoAddress");this.setState({restoUid:e,restoAddress:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement("div",{class:"columns"},r.a.createElement("div",null,r.a.createElement("div",null,"Customer Address:",r.a.createElement("input",{className:"input",type:"text",name:"customerAddress",onChange:this.handleChange,required:!0}),r.a.createElement("a",{class:"button is-black",style:{width:150},onClick:this.handleNewCust,"is-primary":!0},"New Customer"),r.a.createElement("br",null),"Required Points:",r.a.createElement("input",{className:"input",type:"text",name:"earnedPts",onChange:this.handleChange,required:!0}),r.a.createElement("a",{class:"button is-black",style:{width:150},onClick:this.handleStamp},"Stamp"))),r.a.createElement("div",null,r.a.createElement("div",{className:"button2"},r.a.createElement("span",null,r.a.createElement("a",{class:"button is-black",style:{width:100},onClick:function(){return e.setState({open:!0})}},"Add Product"))),r.a.createElement(Z,null))),r.a.createElement(k.Modal,{show:this.state.open,onClose:function(){return e.setState({open:!1})},style:te},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-card"},r.a.createElement("section",{class:"modal-card-body"},r.a.createElement("div",null,r.a.createElement("p",{class:"modal-card-title",alignment:"center"},"Add Product: "),r.a.createElement("p",null,"Enter your product details to add to the catalogue."),r.a.createElement("br",null)),r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Product Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"productName",onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Required Points"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"requiredPts",onChange:this.handleChange,required:!0}))))),r.a.createElement("footer",{class:"modal-card-foot"},r.a.createElement("button",{className:"button is-block is-info is-fullwidth",onClick:this.handleSubmit},"Submit"),r.a.createElement("button",{class:"button",onClick:function(){return e.setState({open:!1})}},"Cancel")))))}}]),t}(a.Component),ae=(n(87),n(88),n(89),n(90),n(91),n(92),n(93),new N),re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,restaurantId:"",redirect:!1,result:"",txHash:""},n.handleClick=n.handleClick.bind(Object(w.a)(n)),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(e){var t=this;e.preventDefault(),ae.stroRedeem().then(function(e){console.log(e),t.setState({txHash:e})})}},{key:"componentDidMount",value:function(){R().then(function(e){console.log("res",e.restouid)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement("div",{class:"columns"},r.a.createElement(Z,null)))}}]),t}(a.Component),oe=function(){return r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/stroDapp",component:K}),r.a.createElement(E.b,{path:"/stroDapp/RestoHome",component:ne}),r.a.createElement(E.b,{path:"/stroDapp/CustomerHome2",component:re}),r.a.createElement(E.b,{path:"/stroDapp/Gallery",component:Z}))},se=function(e){e.children;return r.a.createElement(b,null,r.a.createElement(y,null,r.a.createElement(oe,null)),r.a.createElement(g,null))},ce=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(se,null)}}]),t}(a.Component);n(94);s.a.render(r.a.createElement(c.a,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[71,1,2]]]);
//# sourceMappingURL=main.6cf70dac.chunk.js.map